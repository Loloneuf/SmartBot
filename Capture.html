<!DOCTYPE html5>
<html>
<body>
<div id="basic" style="text-align:center;">
  <video class="videostream" autoplay></video>
  <p><button class="capture-button">Capture video</button> <button id="stop-button">Stop</button></p>
</div>



<style>
video, #screenshot-img {
  width: 400px;
  height: 300px;
}
video {
  background: rgba(255,255,255,0.5);
  border: 1px solid #ccc;
}
</style>


<script>
function handleError(error) {
  console.error('navigator.getUserMedia error: ', error);
}
const constraints = {video: true};

(function() {
  const video = document.querySelector('#basic video');
  const captureVideoButton = document.querySelector('#basic .capture-button');
  let localMediaStream;

  function handleSuccess(stream) {
    localMediaStream = stream;
    video.srcObject = stream;
  }

  captureVideoButton.onclick = function() {
    navigator.mediaDevices.getUserMedia(constraints).
      then(handleSuccess).catch(handleError);
  };

  document.querySelector('#stop-button').onclick = function() {
    video.pause();
    localMediaStream.stop();
  };
})();
</script>
</body>
</html>
